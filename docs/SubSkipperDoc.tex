%%--SubSkipper Documentation
%%--Modified 25/07/15

\documentclass{article}

%%--packages
\usepackage{hyperref}
\usepackage{listings}
\usepackage{color}
\usepackage{graphicx}
\graphicspath{{figures/}}
\usepackage{geometry}

%%--Define Margins
 \geometry{
 a4paper,
 total={170mm,257mm},
 left=20mm,
 right=20mm,
 top=20mm,
 bottom=20mm,
 }


%%--Define style for Java code
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
  language=Java,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}


%%--commands
\newcommand{\degree}{$^{\circ}$}

\author{Filip Socko}
\title{Fleet Boat Reference, Torpedo Solution Methods}

\begin{document}

\maketitle
\pagebreak
\tableofcontents
\pagebreak

\section{Introduction}
The GitHub SubSkipper repository contains the core logic of the app, such that it can be verified or used for other projects. The documentation contains the principles and equations on which the logic is based, and some method documentation.

The main purpose of the repository and documentation is to record techniques and methods of early submarine attack techniques in a way which are simple to employ in computer programs (i.e. showing mathematical equations where possible), as well as acting as a reference for Submarine Simulators.
\\ \\
The Android App will be developed from this repository as a separate, polished product.
\\
This document is a reference for Torpedo types and common conversion factors, as well as types of US Fleet Boats and Types of US Torpedoes. A brief recognition manual will be provided in a separate document. This document also aims to provide a brief overview of common torpedo solution methods.

\section{Unit Conversions}

\subsection{Speed}
\begin{center}
\begin{tabular}{r | r}
$1.0$ knots & $1.0$ NM per hour\\
$1.0$ m/s & $1.94384449$ knots\\
$1.0$ m/s & $3.6$ km/h\\
\end{tabular}
\end{center}

\subsection{Length}
\begin{center}
\begin{tabular}{r | r}
$1.0$ NM & $1852.0$ m\\
$1.0$ km & $0.539956803$ NM\\
$1.0$ NM & $2025.37$ yards\\
$1.0$ NM & $6076.12$ feet\\
$1.0$ m & $3.2808399$ feet\\
$1.0$ m & $1.0936133$ yards\\
\end{tabular}
\end{center}

\section{Torpedo Data}

The following is torpedo for American torpedo types as used predominantly in the Pacific theatre.

Torpedo data adapted from \emph{SH4 V1.2 Ultimate Torpedo Guide} by Mechan, found at the ubisoft forums (http://forums.ubi.com/showthread.php/475595-SH4-V1-2-Ultimate-Torpedo-Guide-Forums). Dated: 06-22-2007, Accessed: 18.08.2015

Slow and Fast speeds and ranges removed as appropriate.

\subsubsection{Mark 10}
\begin{tabular}{l|l}
Available from:& Always\\
Range(m):& 3200\\
Speed(kt):&36\\
Warhead:& 80-160 radius 3-6m\\
Depth keeping:& 70\% chance of deviating $\pm 0.8m - \pm 1.2m$\\
Dud Chance (at AOB):& 1\% (0\degree -70\degree ) 25\% (70\degree-90\degree)\\
Renown cost:& 0\\
\end{tabular} \\
Notes: Default torpedo for the S-Class. Slower and with a shorter range than the Mk. 14, but extremely reliable.\\

\subsubsection{Mark 14}
\begin{tabular}{l|l}
Available from:& Always\\
Range(Slow)(m):& 8200\\
Range(Fast)(m):& 4100\\
Speed(Slow)(kt):&31\\
Speed(Fast)(kt):& 46\\
Warhead:& 100-170 radius 3-7m\\
Depth keeping:& 70\% chance of deviating $\pm 1.5m - \pm 3.3m$\\
Dud Chance (at AOB):& 1\% (0\degree-35\degree); 34\% (35\degree-70\degree); 99\% (70\degree-90\degree)\\
Renown cost:& 0\\
\end{tabular} \\
Notes: Default torpedo for all modern fleet boats. Faster and with a longer range than the Mk. 10, it packs a roughly 20\% stronger punch but is much less reliable.

\subsubsection{Mark 16}
\begin{tabular}{l|l}
Available from:& 1945-01-01\\
Range(m):& 12500\\
Speed(kt):&46\\
Warhead:& 180-250 radius 3.5-8m\\
Depth keeping:&  70\% chance of deviating $\pm 1.5m - \pm 3.3m$\\
Dud Chance (at AOB):& 4\% (0\degree-35\degree); 45\% (35\degree-70\degree); 100\% (70\degree-90\degree)\\
Renown cost:& 400\\
\end{tabular} \\
Notes: Fast torpedo with an exceptionally long range, but also terribly unreliable.

\subsubsection{Mark 18}
\begin{tabular}{l|l}
Available from:& 1943-07-12\\
Range(m):& 3650\\
Speed(kt):&29\\
Warhead:& 120-180 radius 3-7\\
Depth keeping fault chance:& 55\% chance of deviating $\pm 1.2m - \pm 2.8m$\\
Dud Chance (at AOB):& 1\% (0\degree-35\degree); 34\% (35\degree-70\degree); 99\% (70\degree-90\degree)\\
Renown cost:&  500 (200 from 1944-01-16; 0 from 1944-09-01)\\
\end{tabular} \\
Notes: Slower, 10\% more powerful, with a shorter range and much more reliable than the Mk. 14.

\subsubsection{Mark 23}
\begin{tabular}{l|l}
Available from:& 1943-01-01\\
Range(m):& 4100\\
Speed(kt):&46\\
Warhead:& 120-180 radius 3-7m\\
Depth keeping fault chance:& 70\% chance of deviating $\pm 1.5m - \pm 3.3m$\\
Dud Chance (at AOB):& 1\% (0\degree - 35\degree); 34\% (35\degree- 70\degree); 99\% (70\degree- 90\degree)\\
Renown cost:&  100 (0 from 16-01-1944)\\
\end{tabular} \\
Notes: Same range, speed and reliability than the Mk. 14 but roughly 10\% more powerful. Definitely replaces the Mk. 10 as the "standard" torpedo from 16-01-1944.

\subsubsection{Mark 27 "Cutie"}
\begin{tabular}{l|l}
Available From:& 1944-01-01\\
Range(m):& 4570\\
Speed(kt):&12\\
Warhead:& 50-100 radius 1.5-5\\
Depth keeping fault chance:& NA\\
Dud Chance (at AOB):& 1\% (0\degree-25\degree)\\
Renown cost:& 500\\
\end{tabular} \\
Notes: Slow acoustic homing torpedo with a small warhead primarily used for defence against destroyers.

\subsubsection{Torpedo minimum arming distance}
\emph{arming\_distance} is set across all torpedoes to 220m except the Mk. 27, which is 150 meters.
\subsubsection{Torpedo max dive angle}
\emph{max\_dive\_angle} is set to 20 degrees for all torpedo types.
\subsubsection{Torpedo maximum turn angle}
\emph{max\_turn\_angle} is 135\degree for all torpedoes except the Mk. 27, which is 180\degree.
\subsubsection{Magnetic detonation range}
\emph{mag\_detonation\_range} is 2m for all torpedoes except for the Mk. 27, which is 1m.
\subsubsection{Circular runner torpedos}
\emph{circle\_runner\_chance} is 0.5\% for all torpedoes except for the Mk. 27, which is 0\%.
\subsubsection{Gyro problems}
The chance of having gyro problems is 0.3\% at the introduction time of all torpedoes and drops to 0.2\% in later periods for all torpedoes except for the Mk. 16. The \emph{max\_deviation} when having gyro problems is always 50\degree. This does not apply to the Mk. 27. 
\subsubsection{Homing torpedos}
The Mk. 27 will run straight for 200m before homing.

\section{Trigger Maru Overhaul - Fleet Boat Types}
This section consists of pages 25-28 of the Trigger Maru Overhaul Manual which detail fleet boat types:
\includegraphics[page={25}, width=\textwidth, height=\textheight]{TMO_Manual}
\includegraphics[page={26}, width=\textwidth, height=\textheight]{TMO_Manual}
\includegraphics[page={27}, width=\textwidth, height=\textheight]{TMO_Manual}
\includegraphics[page={28}, width=\textwidth, height=\textheight]{TMO_Manual}

\section{O'Kane Torpedo Solution}
The Dick O'Kane method was devised by members of the Subsim.com\cite{subsim} forums. It is a constant bearing method which relies on calculating a lead angle -- an angle on which torpedoes, if launched will intercept the course of the target-- to which the periscope is pointed. As parts of the target ship cross the bearing, torpedoes are fired along it. The O'Kane method relies on being ahead of the target, and the final AOB -- at which the torpedo strikes the target-- to be 90\degree .

Calculates \emph{lead angle} based on target and torpedo speed.\\
The solution requires submarine to be ahead of target.\\
Captain inserts target speed into TDC, puts the scope on the lead bearing, fires as the target crosses the bearing.

The Equation for lead angle is as follows:

$$ LeadAngle = 90 - \arctan\left( \frac{Torpedo Speed}{TargetSpeed} \right) $$

\section{Calculating Distance To Target}

No methods for calculating Distance To Target will be provided as solutions such as a periscope stadimeter and \emph{sonar} are readily available.

\section{Calculating AOB Based on Aspect Ratio}

Method adapted from Angriffscheibe Handbuch by Karl Hahn, 2008.

AOB can be determined given the following data:
\begin{itemize}
%%\item{Range To Target} - Not sure
\item{Observed Mast Height}
\item{Observed Ship Length}
\item{Reference Aspect Ratio (i.e. $\frac{Reference Length}{Reference Mast Height}$)}
\end{itemize}

\subsubsection{Determine an observed \emph{aspect ratio}.}
$$AR\_{observed} = \frac{Observed Length}{Observed Mast Height}$$
As the required figure is a ratio, it does not matter in what units the figures are given. For example, this could be the number of degrees Length and Mast Heigh subtend, the number of periscope graduations subtended or angular length in metres. It only matters that units for Observed Mast Height and Observed Length are the same.

\subsubsection{Determine the Reference Apsect Ratio}
Identify the target and find the Length and Mast Height as given in the recognition manual (if possible) or calculate these figures using the SubSkipper ship parser. Proceed as for the observed aspect ratio to get the Reference Aspect Ratio (\emph{ARreference}).

\subsubsection{AOB calculation}
$$AOB = arcSin \frac{AR\_{observed}}{AR\_{reference}}$$

\begin{itemize}
\item{Note: This method is less accurate as AOB approaches 0. Indeed, using this method with a sample size of 16 at various AOBs, the average error was 9.1\degree and the median error 6.88\degree. The optimum range for collecting data seems to be around 2000m.}
\item{Note: This method does not compute whether the AOB is on the port or starboard side.}
\item{Note: "The AOB can only go up to 90, and gives no indication of starboard or port side showing. You have to determine that visually. If the target is moving away from you, you have to subtract the given angle from 180."\cite[p~15]{angrHandB, tvreAcqData} In Other words, the arcSin function has a domain of +90\degree to -90\degree. When the AOB is between 90\degree and 270\degree, subtract the result from 180\degree. \cite{arcSin}}

\item{AOB (Relative to Target) for each Quadrant:}
\begin{itemize}
	\item{0\degree - 90\degree : Use AOB result as is.}
	\item{90\degree - 180\degree : Subtract AOB result 				 from 180.}
	\item{180\degree - 270\degree : Subtract AOB result from 180, subtract result from 360.}
	\item{270\degree - 360\degree : Subtract AOB result from 360.}
	\end{itemize}

\end{itemize}


\section{Find the speed of a target with constant relative bearing}

This technique takes advantage of the fact that if you are on a convergent course (moving towards each other), and the target’s bearing is not changing over time, then you are actually on a collision course. Since you know your Uboat’s speed and two angles of the triangle (AOB and target bearing), you can calculate the target’s speed.

$$Target speed = Own speed \left( \frac{sin(TB)}{sin (AOB)} \right)$$

You are maintaining 2 knots on an intercept course with a potential target. At the original observation, it was on a bearing of 280\degree with an observed angle on the bow of 20 \degree starboard. After several minutes, the bearing was still 280\degree.

Note: Although you may not be able to achieve an attack position, this technique will also work to calculate the target’s speed if you are on divergent courses. !If an angle is greater than 90\degree, then simply subtract it from 180\degree (since the sine function is symmetrical around 90\degree).

$$Target speed = Own speed \left( \frac{sin(180-TB)}{sin (180-AOB)} \right)$$

\section{Determine the distance to the track of a target}

As you manoeuver into a firing position, it is useful to know your distance to the track of your target. Knowing the range and AOB of the target:

Track: intersection point between Submarine course and the current target course.

$$Distance to Track = Range \left( sin(AOB) \right)$$
%
%\section{Determine an optimum speed for attack position}
%
%To determine own speed needed to reach the target track in time to set up a torpedo solution. (Requires: Target Speed, Target AOB, Bearing to Target, Target Range, Distance to target track)
%
%\begin{enumerate}
%\item{Find distance T must travel to reach a bearing of 000\degree. If the track is known (see previous step) and bearing and range to target is known, time required is:
%$$ s = d/t  $$
%}



\section{Determine the lead angle for a perpendicular attack with 0\degree gyro angle}

Once you are turned onto a perpendicular intercept course, this method calculates when to fire. The lead angle is simply the target bearing at the moment you fire. The range is irrelevant to the calculation although it is best to plan the attack within 500-1000m.

This is O'Kane, except more simple.

$$ lead angle = tan-1 ( [target speed / torpedo speed] ) $$


\section{Determine the torpedo gyro angle}
This example will show how to calculate the required gyro angle for a firing solution. This method is somewhat simplified and is best for smaller gyro angles (\textless 30\degree) and shorter ranges (\textless 1000 metres).

$$sin (lead angle) / sin (AOB) = (target speed) / (torpedo speed)$$
$$ gyroAngle = targetBearing -– leadAngle $$


%%%END END END
\pagebreak
\begin{thebibliography}{9}

\bibitem{angrHandB}
  Karl Hahl,
  Kriegsmarine Angriffscheibe Handbuch,
  p. 15,
  2008.
  
\bibitem{tvreAcqData}
http://www.tvre.org/en/acquiring-torpedo-firing-data,
Acquiring torpedo firing data,
2015.

\bibitem{okane90Angles}
Corey "Gutted" Hardwell,
Silent Hunter IV 90\degree - AOB Firing Angles,
circ. 2008(?).

\bibitem{subsim}
http://www.subsim.com

\bibitem{arcSin}
MathOnWeb,
%http://mathonweb.com/help_ebook/html/functions_2.htm,
The arcsin function,
Accessed 17.08.2015,


\end{thebibliography}




\end{document}

